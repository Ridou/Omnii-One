# Plan 10-06: AI Intelligence REST & MCP Endpoints

## Overview
Expose Phase 10 features via REST routes and MCP tools.

## Dependencies
- 10-02: Cross-source relationship inference
- 10-03: Pre-event context aggregation
- 10-05: Analytics pattern engine

## Tasks

### 1. Create AI routes
Create `apps/omnii_mcp/src/routes/ai-intelligence.ts`:
- `GET /api/ai/briefing/:eventId` - Get meeting briefing
- `GET /api/ai/briefings/upcoming` - List upcoming briefings
- `GET /api/ai/suggestions` - Get pending relationship suggestions
- `POST /api/ai/suggestions/:id/approve` - Approve suggestion
- `POST /api/ai/suggestions/:id/reject` - Reject suggestion
- `GET /api/ai/insights` - Get analytics insights
- `POST /api/ai/insights/:id/dismiss` - Dismiss insight
- `GET /api/ai/analytics/summary` - Get analytics summary
- `POST /api/ai/extract-entities` - Extract entities from text

### 2. Create briefing MCP tool
Update `apps/omnii_mcp/src/mcp/tools/`:
Create `meeting-briefing.ts`:
- Tool: `omnii_get_meeting_briefing`
- Input: eventId or "next" for upcoming
- Output: Full briefing with attendees, documents, actions
- Used by AI to prepare user for meetings

### 3. Create relationship suggestion MCP tool
Create `apps/omnii_mcp/src/mcp/tools/relationship-suggestions.ts`:
- Tool: `omnii_get_relationship_suggestions`
- Input: limit, minConfidence
- Output: Pending suggestions with evidence
- Tool: `omnii_approve_relationship`
- Input: suggestionId
- Creates relationship in graph

### 4. Create insights MCP tool
Create `apps/omnii_mcp/src/mcp/tools/analytics-insights.ts`:
- Tool: `omnii_get_insights`
- Input: category (productivity, collaboration, patterns)
- Output: Recent insights with recommendations
- Tool: `omnii_get_analytics_summary`
- Input: timeRange (week, month)
- Output: Aggregated analytics summary

### 5. Register routes and tools
Update `apps/omnii_mcp/src/routes/index.ts`:
- Import and use aiIntelligenceRoutes

Update `apps/omnii_mcp/src/mcp/tool-registry.ts`:
- Register new MCP tools

### 6. Add OpenTelemetry tracing
Add spans to all new endpoints for observability

## Acceptance Criteria
- [ ] REST endpoints return correct data
- [ ] MCP tools work from Claude Desktop
- [ ] Proper auth on all endpoints
- [ ] Observability spans added

## Wave
4 (depends on 10-02, 10-03, 10-05)
