# Plan 10-03: Pre-Event Context Aggregation Service

## Overview
Build service that aggregates relevant context for upcoming calendar events, preparing "Heads Up" briefings.

## Dependencies
- 10-01: Enhanced entity extraction
- Existing: `services/integrations/calendar-temporal-manager.ts`
- Existing: `services/graphrag/temporal-context.ts`

## Tasks

### 1. Create meeting context types
Create `apps/omnii_mcp/src/services/ai/meeting-context-types.ts`:
- MeetingBriefing interface:
  - eventId, title, startTime, attendees
  - attendeeProfiles: ContactContext[]
  - relatedDocuments: DocumentSummary[]
  - previousMeetings: EventSummary[]
  - relatedEmails: EmailThread[]
  - suggestedActions: ActionItem[]
  - aiSummary: string
- ContactContext: recent interactions, role, relationship strength
- DocumentSummary: title, relevance score, key points

### 2. Create attendee context builder
Create `apps/omnii_mcp/src/services/ai/attendee-context.ts`:
- `buildAttendeeContext()`: For each attendee:
  - Fetch contact profile from graph
  - Find recent email threads with attendee
  - Find shared meetings in last 30 days
  - Extract key talking points from notes
  - Calculate relationship strength score

### 3. Create document relevance finder
Create `apps/omnii_mcp/src/services/ai/document-relevance.ts`:
- `findRelevantDocuments()`: Query documents related to meeting:
  - Title/description keyword match
  - Project/topic overlap
  - Attendee-authored documents
  - Temporal proximity (recent uploads)
- Score and rank by relevance
- Extract key snippets

### 4. Create meeting briefing generator
Create `apps/omnii_mcp/src/services/ai/meeting-briefing.ts`:
- `generateBriefing()`: Orchestrate context aggregation
- `generateAISummary()`: LLM-powered briefing summary
  - Key points to discuss
  - Open items from previous meetings
  - Attendee-specific notes
- `suggestActions()`: Generate pre-meeting action items:
  - Review documents
  - Follow up on open items
  - Prepare talking points

### 5. Create briefing cache
Create `apps/omnii_mcp/src/services/ai/briefing-cache.ts`:
- Cache generated briefings in Neo4j
- Invalidate when source data changes
- TTL: 4 hours (regenerate if stale)

## Acceptance Criteria
- [ ] Briefing includes attendee profiles
- [ ] Briefing includes related documents
- [ ] Briefing includes previous meeting context
- [ ] AI generates summary and suggested actions

## Wave
2 (depends on 10-01, parallel with 10-02)
