---
phase: 09-notes-capture-system
plan: 07
type: execute
wave: 5
depends_on: ["09-05", "09-06"]
files_modified:
  - apps/omnii-mobile/src/features/notes/components/NoteEditor.tsx
  - apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx
  - apps/omnii-mobile/src/features/notes/components/BacklinksPanel.tsx
  - apps/omnii-mobile/src/features/notes/components/TemplateSelector.tsx
  - apps/omnii-mobile/src/features/notes/components/index.ts
autonomous: false

must_haves:
  truths:
    - "User can type note with [[wikilinks]] visible in editor"
    - "User can tap voice button and see real-time transcription"
    - "User can view backlinks panel with linking notes"
    - "User can select template and see pre-filled content"
  artifacts:
    - path: "apps/omnii-mobile/src/features/notes/components/NoteEditor.tsx"
      provides: "Note editing component with wikilink styling"
    - path: "apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx"
      provides: "Voice recording button with transcription display"
    - path: "apps/omnii-mobile/src/features/notes/components/BacklinksPanel.tsx"
      provides: "Panel showing notes that link to current note"
    - path: "apps/omnii-mobile/src/features/notes/components/TemplateSelector.tsx"
      provides: "Template selection modal"
  key_links:
    - from: "apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx"
      to: "apps/omnii-mobile/src/features/notes/hooks/useVoiceCapture.ts"
      via: "uses useVoiceCapture hook"
      pattern: "import.*useVoiceCapture.*from.*hooks"
---

<objective>
Create mobile UI components for note editing, voice capture, backlinks display, and template selection

Purpose: Provides user-facing interface for all note capture features (wiki links, backlinks, templates, voice)
Output: NoteEditor, VoiceNoteButton, BacklinksPanel, TemplateSelector components
</objective>

<execution_context>
@/Users/santino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/santino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-notes-capture-system/09-RESEARCH.md
@apps/omnii-mobile/src/features/notes/hooks/useVoiceCapture.ts
@apps/omnii-mobile/src/components/chat/ChatInput.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create VoiceNoteButton component</name>
  <files>apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx</files>
  <action>
Create voice recording button that shows real-time transcription.

Create `apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx`:

```tsx
/**
 * Voice Note Button
 *
 * Press-and-hold or toggle button for voice note capture.
 * Shows real-time transcription as user speaks.
 */

import React, { useState } from 'react';
import {
  View,
  Text,
  Pressable,
  ActivityIndicator,
  StyleSheet,
} from 'react-native';
import { Mic, MicOff, AlertCircle } from 'lucide-react-native';
import { useVoiceCapture } from '../hooks/useVoiceCapture';

interface VoiceNoteButtonProps {
  /** Called when transcription is complete */
  onTranscriptComplete: (transcript: string) => void;
  /** Called on interim results for live preview */
  onInterimResult?: (transcript: string) => void;
  /** Optional custom styling */
  style?: object;
  /** Language code (default: en-US) */
  language?: string;
}

export function VoiceNoteButton({
  onTranscriptComplete,
  onInterimResult,
  style,
  language = 'en-US',
}: VoiceNoteButtonProps) {
  const [showTranscript, setShowTranscript] = useState(false);

  const {
    transcript,
    isRecording,
    isSupported,
    error,
    isFinal,
    startRecording,
    stopRecording,
    clearTranscript,
  } = useVoiceCapture({
    language,
    onResult: (result) => {
      // Show interim results
      if (onInterimResult && !result.isFinal) {
        onInterimResult(result.transcript);
      }

      // Handle final result
      if (result.isFinal && result.transcript.trim()) {
        onTranscriptComplete(result.transcript);
        setShowTranscript(false);
      }
    },
    onError: (err) => {
      console.error('Voice capture error:', err);
    },
  });

  const handlePress = async () => {
    if (isRecording) {
      stopRecording();
      // Final result will be handled in onResult callback
    } else {
      clearTranscript();
      setShowTranscript(true);
      await startRecording();
    }
  };

  // Not supported on this device
  if (!isSupported) {
    return (
      <View style={[styles.container, styles.disabled, style]}>
        <MicOff size={24} color="#9CA3AF" />
        <Text style={styles.disabledText}>Voice not supported</Text>
      </View>
    );
  }

  return (
    <View style={[styles.container, style]}>
      {/* Recording button */}
      <Pressable
        onPress={handlePress}
        style={[
          styles.button,
          isRecording && styles.buttonRecording,
        ]}
        accessibilityLabel={isRecording ? 'Stop recording' : 'Start voice note'}
        accessibilityRole="button"
      >
        {isRecording ? (
          <>
            <View style={styles.recordingIndicator} />
            <Mic size={24} color="#FFFFFF" />
          </>
        ) : (
          <Mic size={24} color="#6366F1" />
        )}
      </Pressable>

      {/* Transcript display */}
      {showTranscript && (
        <View style={styles.transcriptContainer}>
          {isRecording && (
            <View style={styles.listeningIndicator}>
              <ActivityIndicator size="small" color="#6366F1" />
              <Text style={styles.listeningText}>Listening...</Text>
            </View>
          )}

          {transcript ? (
            <Text style={styles.transcript}>{transcript}</Text>
          ) : (
            isRecording && (
              <Text style={styles.placeholder}>Speak now...</Text>
            )
          )}

          {error && (
            <View style={styles.errorContainer}>
              <AlertCircle size={16} color="#EF4444" />
              <Text style={styles.errorText}>{error}</Text>
            </View>
          )}
        </View>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    alignItems: 'center',
  },
  disabled: {
    opacity: 0.5,
    flexDirection: 'row',
    gap: 8,
  },
  disabledText: {
    color: '#9CA3AF',
    fontSize: 12,
  },
  button: {
    width: 56,
    height: 56,
    borderRadius: 28,
    backgroundColor: '#EEF2FF',
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 2,
    borderColor: '#6366F1',
  },
  buttonRecording: {
    backgroundColor: '#6366F1',
    borderColor: '#4F46E5',
  },
  recordingIndicator: {
    position: 'absolute',
    top: -4,
    right: -4,
    width: 16,
    height: 16,
    borderRadius: 8,
    backgroundColor: '#EF4444',
  },
  transcriptContainer: {
    marginTop: 12,
    padding: 12,
    backgroundColor: '#F9FAFB',
    borderRadius: 8,
    minWidth: 200,
    maxWidth: 300,
  },
  listeningIndicator: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
    marginBottom: 8,
  },
  listeningText: {
    color: '#6366F1',
    fontSize: 12,
    fontWeight: '500',
  },
  transcript: {
    color: '#111827',
    fontSize: 14,
    lineHeight: 20,
  },
  placeholder: {
    color: '#9CA3AF',
    fontSize: 14,
    fontStyle: 'italic',
  },
  errorContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
    marginTop: 8,
  },
  errorText: {
    color: '#EF4444',
    fontSize: 12,
  },
});
```
  </action>
  <verify>Verify file exists with `ls apps/omnii-mobile/src/features/notes/components/VoiceNoteButton.tsx`.</verify>
  <done>VoiceNoteButton component shows recording state and real-time transcription</done>
</task>

<task type="auto">
  <name>Task 2: Create BacklinksPanel and TemplateSelector</name>
  <files>
apps/omnii-mobile/src/features/notes/components/BacklinksPanel.tsx
apps/omnii-mobile/src/features/notes/components/TemplateSelector.tsx
  </files>
  <action>
Create backlinks panel and template selector components.

Create `apps/omnii-mobile/src/features/notes/components/BacklinksPanel.tsx`:

```tsx
/**
 * Backlinks Panel
 *
 * Shows notes that link to the current note.
 * Collapsible panel with preview text for context.
 */

import React, { useState } from 'react';
import {
  View,
  Text,
  Pressable,
  FlatList,
  ActivityIndicator,
  StyleSheet,
} from 'react-native';
import { ChevronDown, ChevronUp, Link2 } from 'lucide-react-native';

interface BacklinkItem {
  noteId: string;
  title: string;
  preview: string;
  updatedAt: string;
}

interface BacklinksPanelProps {
  /** Note ID to show backlinks for */
  targetId: string;
  /** Backlinks data from API */
  backlinks: BacklinkItem[];
  /** Total count (may be more than shown) */
  totalCount: number;
  /** Loading state */
  isLoading?: boolean;
  /** Called when a backlink is pressed */
  onBacklinkPress: (noteId: string) => void;
  /** Load more callback for pagination */
  onLoadMore?: () => void;
}

export function BacklinksPanel({
  backlinks,
  totalCount,
  isLoading,
  onBacklinkPress,
  onLoadMore,
}: BacklinksPanelProps) {
  const [isExpanded, setIsExpanded] = useState(true);

  const formatDate = (dateStr: string) => {
    const date = new Date(dateStr);
    return date.toLocaleDateString(undefined, {
      month: 'short',
      day: 'numeric',
    });
  };

  const renderBacklink = ({ item }: { item: BacklinkItem }) => (
    <Pressable
      style={styles.backlinkItem}
      onPress={() => onBacklinkPress(item.noteId)}
      accessibilityLabel={`Open ${item.title}`}
      accessibilityRole="button"
    >
      <View style={styles.backlinkHeader}>
        <Text style={styles.backlinkTitle} numberOfLines={1}>
          {item.title}
        </Text>
        <Text style={styles.backlinkDate}>{formatDate(item.updatedAt)}</Text>
      </View>
      <Text style={styles.backlinkPreview} numberOfLines={2}>
        {item.preview}
      </Text>
    </Pressable>
  );

  if (totalCount === 0 && !isLoading) {
    return null; // Don't show panel if no backlinks
  }

  return (
    <View style={styles.container}>
      {/* Header */}
      <Pressable
        style={styles.header}
        onPress={() => setIsExpanded(!isExpanded)}
        accessibilityLabel={isExpanded ? 'Collapse backlinks' : 'Expand backlinks'}
        accessibilityRole="button"
      >
        <View style={styles.headerLeft}>
          <Link2 size={16} color="#6366F1" />
          <Text style={styles.headerText}>
            {totalCount} {totalCount === 1 ? 'Backlink' : 'Backlinks'}
          </Text>
        </View>
        {isExpanded ? (
          <ChevronUp size={20} color="#6B7280" />
        ) : (
          <ChevronDown size={20} color="#6B7280" />
        )}
      </Pressable>

      {/* Content */}
      {isExpanded && (
        <View style={styles.content}>
          {isLoading ? (
            <View style={styles.loadingContainer}>
              <ActivityIndicator size="small" color="#6366F1" />
            </View>
          ) : (
            <FlatList
              data={backlinks}
              keyExtractor={(item) => item.noteId}
              renderItem={renderBacklink}
              ItemSeparatorComponent={() => <View style={styles.separator} />}
              ListFooterComponent={
                backlinks.length < totalCount && onLoadMore ? (
                  <Pressable style={styles.loadMore} onPress={onLoadMore}>
                    <Text style={styles.loadMoreText}>
                      Show more ({totalCount - backlinks.length} remaining)
                    </Text>
                  </Pressable>
                ) : null
              }
            />
          )}
        </View>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: '#F9FAFB',
    borderRadius: 8,
    marginVertical: 8,
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: 12,
  },
  headerLeft: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  headerText: {
    fontSize: 14,
    fontWeight: '600',
    color: '#374151',
  },
  content: {
    borderTopWidth: 1,
    borderTopColor: '#E5E7EB',
    maxHeight: 300,
  },
  loadingContainer: {
    padding: 20,
    alignItems: 'center',
  },
  backlinkItem: {
    padding: 12,
  },
  backlinkHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 4,
  },
  backlinkTitle: {
    fontSize: 14,
    fontWeight: '500',
    color: '#111827',
    flex: 1,
    marginRight: 8,
  },
  backlinkDate: {
    fontSize: 12,
    color: '#9CA3AF',
  },
  backlinkPreview: {
    fontSize: 13,
    color: '#6B7280',
    lineHeight: 18,
  },
  separator: {
    height: 1,
    backgroundColor: '#E5E7EB',
  },
  loadMore: {
    padding: 12,
    alignItems: 'center',
  },
  loadMoreText: {
    color: '#6366F1',
    fontSize: 13,
  },
});
```

Create `apps/omnii-mobile/src/features/notes/components/TemplateSelector.tsx`:

```tsx
/**
 * Template Selector
 *
 * Modal or sheet for selecting note templates.
 * Shows template previews and context options.
 */

import React from 'react';
import {
  View,
  Text,
  Pressable,
  Modal,
  StyleSheet,
} from 'react-native';
import {
  X,
  Calendar,
  BookOpen,
  User,
} from 'lucide-react-native';

type TemplateType = 'meeting-notes' | 'daily-journal' | 'contact-notes';

interface Template {
  type: TemplateType;
  name: string;
  description: string;
  icon: React.ReactNode;
}

const templates: Template[] = [
  {
    type: 'meeting-notes',
    name: 'Meeting Notes',
    description: 'Structured notes with attendees, agenda, and action items',
    icon: <Calendar size={24} color="#6366F1" />,
  },
  {
    type: 'daily-journal',
    name: 'Daily Journal',
    description: 'Daily reflection with priorities and gratitude',
    icon: <BookOpen size={24} color="#10B981" />,
  },
  {
    type: 'contact-notes',
    name: 'Contact Notes',
    description: 'Track interactions and notes about a person',
    icon: <User size={24} color="#F59E0B" />,
  },
];

interface TemplateSelectorProps {
  /** Whether modal is visible */
  visible: boolean;
  /** Close callback */
  onClose: () => void;
  /** Called when template is selected */
  onSelectTemplate: (type: TemplateType) => void;
}

export function TemplateSelector({
  visible,
  onClose,
  onSelectTemplate,
}: TemplateSelectorProps) {
  return (
    <Modal
      visible={visible}
      animationType="slide"
      presentationStyle="pageSheet"
      onRequestClose={onClose}
    >
      <View style={styles.container}>
        {/* Header */}
        <View style={styles.header}>
          <Text style={styles.title}>Create from Template</Text>
          <Pressable
            onPress={onClose}
            style={styles.closeButton}
            accessibilityLabel="Close"
            accessibilityRole="button"
          >
            <X size={24} color="#6B7280" />
          </Pressable>
        </View>

        {/* Template list */}
        <View style={styles.templateList}>
          {templates.map((template) => (
            <Pressable
              key={template.type}
              style={styles.templateItem}
              onPress={() => {
                onSelectTemplate(template.type);
                onClose();
              }}
              accessibilityLabel={`Create ${template.name}`}
              accessibilityRole="button"
            >
              <View style={styles.templateIcon}>{template.icon}</View>
              <View style={styles.templateContent}>
                <Text style={styles.templateName}>{template.name}</Text>
                <Text style={styles.templateDescription}>
                  {template.description}
                </Text>
              </View>
            </Pressable>
          ))}
        </View>

        {/* Quick create option */}
        <Pressable
          style={styles.blankNote}
          onPress={() => {
            onClose();
            // Parent handles blank note creation
          }}
        >
          <Text style={styles.blankNoteText}>Or start with a blank note</Text>
        </Pressable>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FFFFFF',
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#E5E7EB',
  },
  title: {
    fontSize: 18,
    fontWeight: '600',
    color: '#111827',
  },
  closeButton: {
    padding: 4,
  },
  templateList: {
    padding: 16,
    gap: 12,
  },
  templateItem: {
    flexDirection: 'row',
    padding: 16,
    backgroundColor: '#F9FAFB',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  templateIcon: {
    width: 48,
    height: 48,
    borderRadius: 8,
    backgroundColor: '#FFFFFF',
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  templateContent: {
    flex: 1,
    justifyContent: 'center',
  },
  templateName: {
    fontSize: 16,
    fontWeight: '600',
    color: '#111827',
    marginBottom: 4,
  },
  templateDescription: {
    fontSize: 13,
    color: '#6B7280',
    lineHeight: 18,
  },
  blankNote: {
    padding: 16,
    alignItems: 'center',
  },
  blankNoteText: {
    color: '#6366F1',
    fontSize: 14,
  },
});
```
  </action>
  <verify>Verify files exist with `ls apps/omnii-mobile/src/features/notes/components/`.</verify>
  <done>BacklinksPanel shows linking notes; TemplateSelector provides template selection modal</done>
</task>

<task type="auto">
  <name>Task 3: Create NoteEditor and module index</name>
  <files>
apps/omnii-mobile/src/features/notes/components/NoteEditor.tsx
apps/omnii-mobile/src/features/notes/components/index.ts
  </files>
  <action>
Create note editor component with wikilink styling and module index.

Create `apps/omnii-mobile/src/features/notes/components/NoteEditor.tsx`:

```tsx
/**
 * Note Editor
 *
 * Markdown-aware text editor with wikilink highlighting.
 * Supports voice input and template insertion.
 */

import React, { useState, useRef, useCallback } from 'react';
import {
  View,
  TextInput,
  Text,
  Pressable,
  ScrollView,
  StyleSheet,
  KeyboardAvoidingView,
  Platform,
} from 'react-native';
import { Save, FileText, Mic } from 'lucide-react-native';
import { VoiceNoteButton } from './VoiceNoteButton';
import { TemplateSelector } from './TemplateSelector';
import { BacklinksPanel } from './BacklinksPanel';

interface NoteEditorProps {
  /** Initial title */
  initialTitle?: string;
  /** Initial content */
  initialContent?: string;
  /** Note ID (for backlinks, undefined for new notes) */
  noteId?: string;
  /** Backlinks data */
  backlinks?: {
    items: Array<{ noteId: string; title: string; preview: string; updatedAt: string }>;
    totalCount: number;
  };
  /** Called when note should be saved */
  onSave: (title: string, content: string) => Promise<void>;
  /** Called when template is selected */
  onTemplateSelect: (type: 'meeting-notes' | 'daily-journal' | 'contact-notes') => void;
  /** Called when backlink is pressed */
  onBacklinkPress: (noteId: string) => void;
  /** Loading state for save */
  isSaving?: boolean;
}

export function NoteEditor({
  initialTitle = '',
  initialContent = '',
  noteId,
  backlinks,
  onSave,
  onTemplateSelect,
  onBacklinkPress,
  isSaving,
}: NoteEditorProps) {
  const [title, setTitle] = useState(initialTitle);
  const [content, setContent] = useState(initialContent);
  const [showTemplates, setShowTemplates] = useState(false);
  const [showVoice, setShowVoice] = useState(false);

  const contentRef = useRef<TextInput>(null);

  // Count wikilinks for display
  const wikilinkCount = (content.match(/\[\[[^\]]+\]\]/g) || []).length;

  const handleSave = async () => {
    if (!title.trim()) {
      // Require title
      return;
    }
    await onSave(title.trim(), content);
  };

  const handleVoiceTranscript = useCallback((transcript: string) => {
    // Append transcript to content
    setContent((prev) => {
      if (prev.endsWith('\n') || prev === '') {
        return prev + transcript;
      }
      return prev + '\n\n' + transcript;
    });
    setShowVoice(false);
  }, []);

  return (
    <KeyboardAvoidingView
      style={styles.container}
      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
    >
      {/* Toolbar */}
      <View style={styles.toolbar}>
        <Pressable
          style={styles.toolbarButton}
          onPress={() => setShowTemplates(true)}
          accessibilityLabel="Use template"
        >
          <FileText size={20} color="#6366F1" />
        </Pressable>

        <Pressable
          style={styles.toolbarButton}
          onPress={() => setShowVoice(true)}
          accessibilityLabel="Voice input"
        >
          <Mic size={20} color="#6366F1" />
        </Pressable>

        <View style={styles.toolbarSpacer} />

        {wikilinkCount > 0 && (
          <Text style={styles.linkCount}>
            {wikilinkCount} {wikilinkCount === 1 ? 'link' : 'links'}
          </Text>
        )}

        <Pressable
          style={[styles.saveButton, isSaving && styles.saveButtonDisabled]}
          onPress={handleSave}
          disabled={isSaving || !title.trim()}
          accessibilityLabel="Save note"
        >
          <Save size={20} color="#FFFFFF" />
          <Text style={styles.saveButtonText}>
            {isSaving ? 'Saving...' : 'Save'}
          </Text>
        </Pressable>
      </View>

      <ScrollView style={styles.editorScroll}>
        {/* Title input */}
        <TextInput
          style={styles.titleInput}
          value={title}
          onChangeText={setTitle}
          placeholder="Note title..."
          placeholderTextColor="#9CA3AF"
          autoFocus={!initialTitle}
          returnKeyType="next"
          onSubmitEditing={() => contentRef.current?.focus()}
        />

        {/* Content input */}
        <TextInput
          ref={contentRef}
          style={styles.contentInput}
          value={content}
          onChangeText={setContent}
          placeholder="Start writing... Use [[double brackets]] to create links"
          placeholderTextColor="#9CA3AF"
          multiline
          textAlignVertical="top"
        />

        {/* Backlinks panel (if viewing existing note) */}
        {noteId && backlinks && (
          <BacklinksPanel
            targetId={noteId}
            backlinks={backlinks.items}
            totalCount={backlinks.totalCount}
            onBacklinkPress={onBacklinkPress}
          />
        )}
      </ScrollView>

      {/* Template selector modal */}
      <TemplateSelector
        visible={showTemplates}
        onClose={() => setShowTemplates(false)}
        onSelectTemplate={onTemplateSelect}
      />

      {/* Voice input modal */}
      {showVoice && (
        <View style={styles.voiceOverlay}>
          <Pressable
            style={styles.voiceBackdrop}
            onPress={() => setShowVoice(false)}
          />
          <View style={styles.voiceContainer}>
            <Text style={styles.voiceTitle}>Voice Note</Text>
            <VoiceNoteButton onTranscriptComplete={handleVoiceTranscript} />
            <Pressable
              style={styles.voiceCancel}
              onPress={() => setShowVoice(false)}
            >
              <Text style={styles.voiceCancelText}>Cancel</Text>
            </Pressable>
          </View>
        </View>
      )}
    </KeyboardAvoidingView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FFFFFF',
  },
  toolbar: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 12,
    borderBottomWidth: 1,
    borderBottomColor: '#E5E7EB',
    gap: 8,
  },
  toolbarButton: {
    padding: 8,
    borderRadius: 8,
    backgroundColor: '#EEF2FF',
  },
  toolbarSpacer: {
    flex: 1,
  },
  linkCount: {
    fontSize: 12,
    color: '#6B7280',
    marginRight: 12,
  },
  saveButton: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
    paddingHorizontal: 16,
    paddingVertical: 8,
    backgroundColor: '#6366F1',
    borderRadius: 8,
  },
  saveButtonDisabled: {
    opacity: 0.5,
  },
  saveButtonText: {
    color: '#FFFFFF',
    fontWeight: '600',
  },
  editorScroll: {
    flex: 1,
    padding: 16,
  },
  titleInput: {
    fontSize: 24,
    fontWeight: '600',
    color: '#111827',
    marginBottom: 16,
    padding: 0,
  },
  contentInput: {
    fontSize: 16,
    color: '#374151',
    lineHeight: 24,
    minHeight: 200,
    padding: 0,
  },
  voiceOverlay: {
    ...StyleSheet.absoluteFillObject,
    justifyContent: 'flex-end',
  },
  voiceBackdrop: {
    ...StyleSheet.absoluteFillObject,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
  },
  voiceContainer: {
    backgroundColor: '#FFFFFF',
    borderTopLeftRadius: 16,
    borderTopRightRadius: 16,
    padding: 24,
    alignItems: 'center',
  },
  voiceTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: '#111827',
    marginBottom: 24,
  },
  voiceCancel: {
    marginTop: 24,
    padding: 12,
  },
  voiceCancelText: {
    color: '#6B7280',
    fontSize: 16,
  },
});
```

Create `apps/omnii-mobile/src/features/notes/components/index.ts`:

```typescript
/**
 * Notes Feature Components
 */

export { NoteEditor } from './NoteEditor';
export { VoiceNoteButton } from './VoiceNoteButton';
export { BacklinksPanel } from './BacklinksPanel';
export { TemplateSelector } from './TemplateSelector';
```
  </action>
  <verify>Verify all component files exist with `ls apps/omnii-mobile/src/features/notes/components/`.</verify>
  <done>NoteEditor with toolbar, voice overlay, and backlinks; component index exports all components</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete mobile UI for note capture:
- VoiceNoteButton: Press to record, shows real-time transcription
- BacklinksPanel: Collapsible panel showing linking notes
- TemplateSelector: Modal with three template options
- NoteEditor: Full editing experience with toolbar, voice, and backlinks
  </what-built>
  <how-to-verify>
1. Run mobile app: `cd apps/omnii-mobile && npx expo start`
2. Navigate to a screen that uses NoteEditor (or create test screen)
3. Test voice capture:
   - Tap microphone button
   - Speak a sentence
   - Verify transcription appears within 3 seconds
   - Verify text is inserted into editor
4. Test template selector:
   - Tap template button in toolbar
   - Verify three templates shown
   - Select one and verify content appears
5. Test backlinks panel (requires existing notes with links):
   - View note that has backlinks
   - Verify panel shows linking notes
   - Tap a backlink to navigate
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. All component files created and exported
2. VoiceNoteButton uses useVoiceCapture hook
3. BacklinksPanel shows collapsible list
4. TemplateSelector displays three template options
5. NoteEditor integrates all components
6. Human verification of voice latency (<3s)
</verification>

<success_criteria>
- Voice capture shows transcription within 3 seconds
- Backlinks panel displays linking notes
- Template selector works
- Note editor integrates all features
- All NOTE requirements (01-04) have UI support
</success_criteria>

<output>
After completion, create `.planning/phases/09-notes-capture-system/09-07-SUMMARY.md`
</output>
