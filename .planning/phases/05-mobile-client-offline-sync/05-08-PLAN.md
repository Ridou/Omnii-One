---
phase: 05-mobile-client-offline-sync
plan: 08
type: execute
wave: 5
depends_on: ["05-03", "05-04", "05-05", "05-06", "05-07"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "App runs on iOS/Android simulator or device"
    - "User can authenticate via Supabase"
    - "User can connect Google services from mobile"
    - "Sync status shows online/offline/syncing states"
    - "Graph data displays from local PowerSync database"
  artifacts: []
  key_links: []
---

<objective>
End-to-end verification of Phase 5 mobile client functionality.

Purpose: Validate all MOBILE requirements work together as an integrated system. This is a human verification checkpoint, not automated tests.

Output: Verification that all success criteria are met.
</objective>

<execution_context>
@/Users/santino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/santino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md (Phase 5 success criteria)
@.planning/phases/05-mobile-client-offline-sync/05-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify core mobile app functionality</name>
  <what-built>
Complete mobile client with:
- Supabase authentication
- Google OAuth connection management
- PowerSync offline sync infrastructure
- Connection status indicators
- Graph data views (EntityList, EventTimeline)
- MCP backend integration
  </what-built>
  <how-to-verify>
**Preparation:**
1. Start MCP backend: `cd apps/omnii_mcp && bun run dev`
2. Start mobile app: `cd apps/omnii-mobile && npm run dev:ios` (or dev:android)
3. Ensure development build is installed (not Expo Go)

**Test Flow:**

**1. Authentication (MOBILE-02)**
- [ ] App shows login screen when not authenticated
- [ ] Can sign in with Google via Supabase
- [ ] After login, redirects to main tabs

**2. Google Connection (MOBILE-03)**
- [ ] Navigate to Profile tab
- [ ] "Connected Services" section visible
- [ ] Tap "Connect Google Account"
- [ ] OAuth flow opens in browser
- [ ] Complete OAuth and return to app
- [ ] Services show as connected with status

**3. Sync Status (MOBILE-08)**
- [ ] Sync indicator visible in header or tabs
- [ ] Status shows "Synced" when connected
- [ ] Turn on airplane mode - status shows "Offline"
- [ ] Turn off airplane mode - status shows "Syncing" then "Synced"

**4. Graph Data Views (MOBILE-06)**
- [ ] Navigate to entities/data view
- [ ] EntityList shows synced entities
- [ ] Filter by entity type works
- [ ] Search by name works
- [ ] EventTimeline shows calendar events grouped by date

**5. Offline Capability (MOBILE-04, MOBILE-05)**
- [ ] Enable airplane mode
- [ ] Entity list still loads (from local database)
- [ ] Event timeline still shows events
- [ ] Disable airplane mode
- [ ] New data syncs automatically

**6. MCP Integration**
- [ ] Can search graph via MCP (if search UI exists)
- [ ] MCP tool calls work with authentication

**Expected Results:**
- All checkboxes above should be verified
- No crashes or unhandled errors
- Sync completes without data loss
  </how-to-verify>
  <resume-signal>
Type "verified" if all checks pass.
If issues found, describe what failed and any error messages.
  </resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify UI/UX quality</name>
  <what-built>
Mobile UI including:
- Login screens
- Tab navigation
- Profile with Google connections
- Entity list with filters
- Event timeline
- Sync status indicators
  </what-built>
  <how-to-verify>
**Visual/UX Verification:**

**1. Visual Polish (MOBILE-07)**
- [ ] App matches existing design language/vibe
- [ ] Colors consistent with brand
- [ ] Icons render correctly (no missing icons)
- [ ] NativeWind/Tailwind styles apply correctly

**2. Responsive Layout**
- [ ] Looks good on phone screen
- [ ] Looks good on tablet (if applicable)
- [ ] No cut-off text or overlapping elements

**3. Animations**
- [ ] Sync indicator pulses/spins during sync
- [ ] Tab transitions smooth
- [ ] List scrolling is smooth (no jank)

**4. Error Handling**
- [ ] Network error shows user-friendly message
- [ ] Loading states show spinners
- [ ] Empty states have helpful messages

**5. Accessibility**
- [ ] Text readable (sufficient contrast)
- [ ] Touch targets adequately sized
- [ ] Screen reader labels (if tested)
  </how-to-verify>
  <resume-signal>
Type "approved" if UI quality meets standards.
Describe any visual issues to address.
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Document known limitations</name>
  <files>.planning/phases/05-mobile-client-offline-sync/05-08-SUMMARY.md</files>
  <action>
After human verification, create summary documenting:

1. **Verification Results:**
   - Which checks passed
   - Any issues found and their status (fixed/deferred)

2. **Requirements Coverage:**
   - MOBILE-01: Cross-platform app - [Status]
   - MOBILE-02: Supabase auth - [Status]
   - MOBILE-03: OAuth connection management - [Status]
   - MOBILE-04: Local-first data layer - [Status]
   - MOBILE-05: Real-time sync - [Status]
   - MOBILE-06: Unified data view - [Status]
   - MOBILE-07: Engaging UI - [Status]
   - MOBILE-08: Connection status indicators - [Status]

3. **Known Limitations:**
   - Any features partially implemented
   - Edge cases not handled
   - Performance concerns

4. **Next Steps:**
   - Phase 6 readiness
   - Any follow-up tasks

Create the summary file following the standard template.
  </action>
  <verify>Summary file exists with verification results</verify>
  <done>05-08-SUMMARY.md documents phase completion status</done>
</task>

</tasks>

<verification>
Human verification checkpoints ensure all MOBILE requirements work end-to-end.
Summary documents actual verification outcomes.
</verification>

<success_criteria>
All Phase 5 success criteria verified:
- [ ] React Native/Expo app runs on iOS and Android
- [ ] User can authenticate from mobile app
- [ ] User can connect Google services via OAuth
- [ ] Local-first data layer stores content offline
- [ ] Mobile app syncs with backend, conflict resolution preserves edits
- [ ] Unified data view shows entities, relationships, timeline
- [ ] Connection status indicators show sync state clearly
- [ ] (Third codebase consolidation deferred to later if needed)
</success_criteria>

<output>
After completion, create `.planning/phases/05-mobile-client-offline-sync/05-08-SUMMARY.md`
</output>
